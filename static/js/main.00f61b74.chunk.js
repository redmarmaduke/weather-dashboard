(this["webpackJsonpweather-dashboard"]=this["webpackJsonpweather-dashboard"]||[]).push([[0],{13:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),r=n(8),a=n.n(r),o=(n(13),n(6)),s=n(2),l=n(4),d=(n(14),n(15));function u(e,t){var n=Object(s.a)({units:"imperial",appid:"1ca7ce78e703503786e910c2c8760a17"},e),c="https://api.openweathermap.org/data/2.5/".concat(t,"?");return c+=Object.entries(n).map((function(e){return e[0].concat("=",e[1])})).join("&"),fetch(c,{mode:"cors",method:"GET"}).then((function(e){return e.json()}))}var j={getWeather:function(e){return u(e,"weather").then((function(e){return e.cod&&200!==e.cod?(console.log("COD!!!"),{}):new Promise((function(t){return t({city:e.name,date:d(1e3*parseInt(e.dt)).format("M/D/YYYY"),temperature:e.main.temp,humidity:e.main.humidity,wind_speed:e.wind.speed,icon_url:"https://openweathermap.org/img/wn/"+e.weather[0].icon+"@2x.png",latitude:e.coord.lat,longitude:e.coord.lon})}))}))},getUVI:function(e,t){return u({lat:e,lon:t},"uvi").then((function(e){return new Promise((function(t){return t({uv_index:e.value})}))}))},getForecast:function(e,t){return u({lat:e,lon:t,exclude:"minutely,hourly,current,alerts"},"onecall").then((function(e){return new Promise((function(t){return t({forecast:e.daily.slice(1,6).map((function(t,n){return{city:e.name,date:d(1e3*parseInt(e.daily[n].dt)).format("M/D/YYYY"),icon_url:"https://openweathermap.org/img/wn/"+e.daily[n].weather[0].icon+"@2x.png",temperature:e.daily[n].temp.day,humidity:e.daily[n].humidity}}))})}))}))}},h=n(0);function b(e){return Object(h.jsx)("div",{className:"card mr-4 mb-3 bg-primary text-white",children:Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsx)("h5",{className:"card-title",children:e.date||"--/--/----"}),Object(h.jsx)("img",{src:e.icon_url,width:35,alt:e.icon_url}),Object(h.jsxs)("p",{className:"card-text",children:["Temp: ",e.temperature||"--.--"," \xb0F"]}),Object(h.jsxs)("p",{className:"card-text",children:["Humidity: ",e.humidity||"--","%"]})]})})}function f(e){e.forecasts||Array(5).fill({});return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{className:"display-5",children:"5-Day Forecast:"}),Object(h.jsx)("div",{className:"container d-flex flex-wrap justify-content-start align-items-start",children:e.forecasts.map((function(e,t){return Object(h.jsx)(b,Object(s.a)({},e),t)}))})]})}function m(e){var t;return t=e.uv_index<3?"forestgreen":e.uv_index<5?"gold":e.uv_index<7?"orangered":e.uv_index<10?"red":"slateblue",Object(h.jsxs)("div",{className:"container-fluid",children:[Object(h.jsxs)("div",{className:"display-5 d-flex align-items-center",children:[Object(h.jsxs)("h2",{id:"today_city_date",className:"mb-1",children:[e.city||"--------"," (",e.date||"--/--/----",")"]}),Object(h.jsx)("img",{src:e.icon_url,alt:e.icon_url,id:"today_img"})]}),Object(h.jsxs)("p",{id:"today_temperature",children:["Temperature: ",e.temperature||"--.--"," \xb0F"]}),Object(h.jsxs)("p",{id:"today_humidity",children:["Humidity: ",e.humidity||"--","%"]}),Object(h.jsxs)("p",{id:"today_wind_speed",children:["Wind Speed: ",e.wind_speed||"-.-"," MPH"]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{style:{display:"inline-block"},children:"UV Index: "}),Object(h.jsx)("span",{id:"today_uv_index",style:{backgroundColor:t,color:"#000"},disabled:!0,children:e.uv_index||"--.-"})]})]})}function p(e){var t=Object(c.useRef)(e.value||""),n=e.setState||function(){};return Object(h.jsxs)("form",{className:"input-group location-history",onSubmit:function(c){c.preventDefault(),n(t.current.value),t.current.value=e.value||""},children:[Object(h.jsx)("input",{ref:t,id:"input_location",type:"text",className:"form-control",placeholder:"Location"}),Object(h.jsx)("button",{id:"submit_location",type:"button",className:"btn btn-default bg-primary input-group-append",onClick:function(){n(t.current.value),t.current.value=e.value||""},children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",className:"img-fluid",width:"25px",height:"25px",viewBox:"0 0 172 172",style:{fill:"#000000"},children:Object(h.jsxs)("g",{fill:"none",fillRule:"nonzero",stroke:"none",strokeWidth:"1",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:"10",strokeDasharray:"",strokeDashoffset:"0",fontFamily:"none",fontSize:"none",style:{mixBlendMode:"normal"},children:[Object(h.jsx)("path",{d:"M0,172v-172h172v172z",fill:"none"}),Object(h.jsx)("g",{id:"original-icon",fill:"#ffffff",children:Object(h.jsx)("path",{d:"M72.24,10.32c-32.33062,0 -58.48,26.14938 -58.48,58.48c0,32.33063 26.14938,58.48 58.48,58.48c11.54281,0 22.22563,-3.38625 31.2825,-9.1375l42.2475,42.2475l14.62,-14.62l-41.71,-41.6025c7.49813,-9.83625 12.04,-22.02406 12.04,-35.3675c0,-32.33062 -26.14937,-58.48 -58.48,-58.48zM72.24,24.08c24.76531,0 44.72,19.95469 44.72,44.72c0,24.76531 -19.95469,44.72 -44.72,44.72c-24.76531,0 -44.72,-19.95469 -44.72,-44.72c0,-24.76531 19.95469,-44.72 44.72,-44.72z"})})]})})})]})}function x(e){function t(t){for(var n=e.history.indexOf(t.target.textContent),c=Object(o.a)(e.history);n>0;){var i=[c[n-1],c[n]];c[n]=i[0],c[n-1]=i[1],--n}e.setHistory(c)}return Object(h.jsx)("ul",{id:"location_history",className:"list-group location-history",children:e.history.map((function(e,n){return Object(h.jsx)("li",{className:"list-group-item",onClick:t,children:e},n)}))})}var O=function(){var e=Object(c.useState)(Array(5).fill({})),t=Object(l.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)({}),a=Object(l.a)(r,2),d=a[0],u=a[1],b=Object(c.useState)([]),O=Object(l.a)(b,2),y=O[0],g=O[1],v=Object(c.useState)(void 0),w=Object(l.a)(v,2),N=w[0],_=w[1];function S(e){return console.log(e),j.getWeather(e).then((function(e){if(!e.latitude||!e.longitude)throw Error("Err?");return j.getForecast(e.latitude,e.longitude).then((function(e){var t=e.forecast;i(t)})),j.getUVI(e.latitude,e.longitude).then((function(t){var n=Object(s.a)(Object(s.a)(Object(s.a)({},d),e),t);return u(n),n.city}))})).then((function(e){if(-1===y.indexOf(e)){var t=[e].concat(Object(o.a)(y));localStorage.setItem("locations",JSON.stringify(t)),g(t)}}))}return Object(c.useEffect)((function(){if(void 0===N){var e=localStorage.getItem("locations");e?(e=JSON.parse(e),g(e)):navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){S({lat:e.coords.latitude,lon:e.coords.longitude})})):S({q:"San+Jose"})}}),[]),Object(c.useEffect)((function(){S({q:N})}),[N]),Object(c.useEffect)((function(){y.length&&S({q:y[0]})}),[y]),Object(h.jsxs)("div",{children:[Object(h.jsx)("nav",{className:"navbar bg-dark justify-content-center",children:Object(h.jsx)("h1",{className:"navbar-brand text-white display-5",style:{fontSize:"250%"},children:"Weather Dashboard"})}),Object(h.jsxs)("div",{className:"row d-flex flex-column flex-md-row",children:[Object(h.jsxs)("div",{className:"col-auto col-md-3 pl-4 pb-2 h-auto search",children:[Object(h.jsxs)("div",{className:"pb-4",children:[Object(h.jsx)("h5",{children:Object(h.jsx)("label",{className:"display-5",children:"Search for a City:"})}),Object(h.jsx)(p,{setState:_})]}),Object(h.jsx)(x,{history:y,setHistory:g})]}),Object(h.jsx)("div",{className:"col-auto col-md-9 p-0",children:Object(h.jsxs)("div",{className:"container-fluid m-2 p-2",children:[Object(h.jsxs)("div",{className:"jumbotron jumbotron-fluid px-4 border bg-white",children:[Object(h.jsx)(m,Object(s.a)({},d)),Object(h.jsx)(f,{forecasts:n})]}),Object(h.jsx)("div",{children:Object(h.jsx)("a",{href:"https://icons8.com/icon/7695/search",children:"Search icon by Icons8"})})]})})]})]})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),r(e),a(e)}))};a.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(O,{})}),document.getElementById("root")),y()}},[[18,1,2]]]);
//# sourceMappingURL=main.00f61b74.chunk.js.map